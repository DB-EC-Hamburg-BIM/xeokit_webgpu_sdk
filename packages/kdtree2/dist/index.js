var e=require("@xeokit/matrix"),t=require("@xeokit/compression");function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,"symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key))?i:String(i),r)}var i}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}require("@xeokit/core");var a=0;function c(e){return"__private_"+a+++"_"+e}function u(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var l=Float64Array,p=e.createVec3(),h=e.createVec3(),f=e.createMat4();function d(e,t){return e[0]<=t[0]&&t[3]<=e[3]&&e[1]<=t[1]&&e[2]<=t[2]}var v=/*#__PURE__*/function(){function t(){this.testVertex=void 0,this.offset=void 0,this.normal=void 0,this.normal=e.createVec3(),this.offset=0,this.testVertex=e.createVec3()}return t.prototype.set=function(e,t,n,r){var i=1/Math.sqrt(e*e+t*t+n*n);this.normal[0]=e*i,this.normal[1]=t*i,this.normal[2]=n*i,this.offset=r*i,this.testVertex[0]=this.normal[0]>=0?1:0,this.testVertex[1]=this.normal[1]>=0?1:0,this.testVertex[2]=this.normal[2]>=0?1:0},t}(),m=function(){this.planes=void 0,this.planes=[new v,new v,new v,new v,new v,new v]},g=new Float32Array(2),b=/*#__PURE__*/c("insertItem"),y=/*#__PURE__*/function(){function e(e){Object.defineProperty(this,b,{value:P}),this.root=void 0,this.maxDepth=void 0,this.maxDepth=(null==e?void 0:e.maxDepth)||10,this.root={aabb:e.aabb.slice()}}return e.prototype.insertItem=function(e,t){u(this,b)[b](this.root,{item:e},t,1)},e}();function P(e,t,n,r){if(r>=this.maxDepth)return e.items=e.items||[],void e.items.push(t);if(e.left&&d(e.left.aabb,n))u(this,b)[b](e.left,t,n,r+1);else if(e.right&&d(e.right.aabb,n))u(this,b)[b](e.right,t,n,r+1);else{var i=e.aabb;g[0]=i[2]-i[0],g[1]=i[3]-i[1];var o=0;if(g[1]>g[o]&&(o=1),!e.left){var s=i.slice();if(s[o+2]=(i[o]+i[o+2])/2,e.left={aabb:s},d(s,n))return void u(this,b)[b](e.left,t,n,r+1)}if(!e.right){var a=i.slice();if(a[o]=(i[o]+i[o+2])/2,e.right={aabb:a},d(a,n))return void u(this,b)[b](e.right,t,n,r+1)}e.items=e.items||[],e.items.push(t)}}function E(e){var t={exports:{}};return e(t,t.exports),t.exports}var _=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DispatcherWrapper=void 0,t.DispatcherWrapper=class{constructor(e){this._subscribe=t=>e.subscribe(t),this._unsubscribe=t=>e.unsubscribe(t),this._one=t=>e.one(t),this._has=t=>e.has(t),this._clear=()=>e.clear(),this._count=()=>e.count,this._onSubscriptionChange=()=>e.onSubscriptionChange}get onSubscriptionChange(){return this._onSubscriptionChange()}get count(){return this._count()}subscribe(e){return this._subscribe(e)}sub(e){return this.subscribe(e)}unsubscribe(e){this._unsubscribe(e)}unsub(e){this.unsubscribe(e)}one(e){return this._one(e)}has(e){return this._has(e)}clear(){this._clear()}}}),S=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Subscription=void 0,t.Subscription=class{constructor(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}execute(e,t,n){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var r=this.handler;e?setTimeout(()=>{r.apply(t,n)},1):r.apply(t,n)}}}}),w=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EventManagement=void 0,t.EventManagement=class{constructor(e){this.unsub=e,this.propagationStopped=!1}stopPropagation(){this.propagationStopped=!0}}}),j=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionChangeEventDispatcher=t.DispatcherBase=void 0;class n{constructor(){this._subscriptions=new Array}get count(){return this._subscriptions.length}get onSubscriptionChange(){return null==this._onSubscriptionChange&&(this._onSubscriptionChange=new r),this._onSubscriptionChange.asEvent()}subscribe(e){return e&&(this._subscriptions.push(this.createSubscription(e,!1)),this.triggerSubscriptionChange()),()=>{this.unsubscribe(e)}}sub(e){return this.subscribe(e)}one(e){return e&&(this._subscriptions.push(this.createSubscription(e,!0)),this.triggerSubscriptionChange()),()=>{this.unsubscribe(e)}}has(e){return!!e&&this._subscriptions.some(t=>t.handler==e)}unsubscribe(e){if(!e)return;let t=!1;for(let n=0;n<this._subscriptions.length;n++)if(this._subscriptions[n].handler==e){this._subscriptions.splice(n,1),t=!0;break}t&&this.triggerSubscriptionChange()}unsub(e){this.unsubscribe(e)}_dispatch(e,t,n){for(let r of[...this._subscriptions]){let i=new w.EventManagement(()=>this.unsub(r.handler)),o=Array.prototype.slice.call(n);if(o.push(i),r.execute(e,t,o),this.cleanup(r),!e&&i.propagationStopped)return{propagationStopped:!0}}return e?null:{propagationStopped:!1}}createSubscription(e,t){return new S.Subscription(e,t)}cleanup(e){let t=!1;if(e.isOnce&&e.isExecuted){let n=this._subscriptions.indexOf(e);n>-1&&(this._subscriptions.splice(n,1),t=!0)}t&&this.triggerSubscriptionChange()}asEvent(){return null==this._wrap&&(this._wrap=new _.DispatcherWrapper(this)),this._wrap}clear(){0!=this._subscriptions.length&&(this._subscriptions.splice(0,this._subscriptions.length),this.triggerSubscriptionChange())}triggerSubscriptionChange(){null!=this._onSubscriptionChange&&this._onSubscriptionChange.dispatch(this.count)}}t.DispatcherBase=n;class r extends n{dispatch(e){this._dispatch(!1,this,arguments)}}t.SubscriptionChangeEventDispatcher=r}),O=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DispatchError=void 0;class n extends Error{constructor(e){super(e)}}t.DispatchError=n}),D=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EventListBase=void 0,t.EventListBase=class{constructor(){this._events={}}get(e){let t=this._events[e];return t||(t=this.createDispatcher(),this._events[e]=t,t)}remove(e){delete this._events[e]}}}),L=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HandlingBase=void 0,t.HandlingBase=class{constructor(e){this.events=e}one(e,t){this.events.get(e).one(t)}has(e,t){return this.events.get(e).has(t)}subscribe(e,t){this.events.get(e).subscribe(t)}sub(e,t){this.subscribe(e,t)}unsubscribe(e,t){this.events.get(e).unsubscribe(t)}unsub(e,t){this.unsubscribe(e,t)}}}),B=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSubscription=void 0,t.PromiseSubscription=class{constructor(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}async execute(e,t,n){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var r=this.handler;if(e)return void setTimeout(()=>{r.apply(t,n)},1);let i=r.apply(t,n);await i}}}}),x=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseDispatcherBase=void 0,t.PromiseDispatcherBase=class extends j.DispatcherBase{_dispatch(e,t,n){throw new O.DispatchError("_dispatch not supported. Use _dispatchAsPromise.")}createSubscription(e,t){return new B.PromiseSubscription(e,t)}async _dispatchAsPromise(e,t,n){for(let r of[...this._subscriptions]){let i=new w.EventManagement(()=>this.unsub(r.handler)),o=Array.prototype.slice.call(n);o.push(i);let s=r;if(await s.execute(e,t,o),this.cleanup(r),!e&&i.propagationStopped)return{propagationStopped:!0}}return e?null:{propagationStopped:!1}}}}),M=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionChangeEventDispatcher=t.HandlingBase=t.PromiseDispatcherBase=t.PromiseSubscription=t.DispatchError=t.EventManagement=t.EventListBase=t.DispatcherWrapper=t.DispatcherBase=t.Subscription=void 0,Object.defineProperty(t,"DispatcherBase",{enumerable:!0,get:function(){return j.DispatcherBase}}),Object.defineProperty(t,"SubscriptionChangeEventDispatcher",{enumerable:!0,get:function(){return j.SubscriptionChangeEventDispatcher}}),Object.defineProperty(t,"DispatchError",{enumerable:!0,get:function(){return O.DispatchError}}),Object.defineProperty(t,"DispatcherWrapper",{enumerable:!0,get:function(){return _.DispatcherWrapper}}),Object.defineProperty(t,"EventListBase",{enumerable:!0,get:function(){return D.EventListBase}}),Object.defineProperty(t,"EventManagement",{enumerable:!0,get:function(){return w.EventManagement}}),Object.defineProperty(t,"HandlingBase",{enumerable:!0,get:function(){return L.HandlingBase}}),Object.defineProperty(t,"PromiseDispatcherBase",{enumerable:!0,get:function(){return x.PromiseDispatcherBase}}),Object.defineProperty(t,"PromiseSubscription",{enumerable:!0,get:function(){return B.PromiseSubscription}}),Object.defineProperty(t,"Subscription",{enumerable:!0,get:function(){return S.Subscription}})}),k=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EventDispatcher=void 0,t.EventDispatcher=class extends M.DispatcherBase{constructor(){super()}dispatch(e,t){const n=this._dispatch(!1,this,arguments);if(null==n)throw new M.DispatchError("Got `null` back from dispatch.");return n}dispatchAsync(e,t){this._dispatch(!0,this,arguments)}asEvent(){return super.asEvent()}}}),H=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EventList=void 0,t.EventList=class extends M.EventListBase{constructor(){super()}createDispatcher(){return new k.EventDispatcher}}}),C=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EventHandlingBase=void 0,t.EventHandlingBase=class extends M.HandlingBase{constructor(){super(new H.EventList)}}}),A=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformEventList=void 0,t.NonUniformEventList=class{constructor(){this._events={}}get(e){if(this._events[e])return this._events[e];const t=this.createDispatcher();return this._events[e]=t,t}remove(e){delete this._events[e]}createDispatcher(){return new k.EventDispatcher}}}),N=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformEventList=t.EventList=t.EventHandlingBase=t.EventDispatcher=void 0,Object.defineProperty(t,"EventDispatcher",{enumerable:!0,get:function(){return k.EventDispatcher}}),Object.defineProperty(t,"EventHandlingBase",{enumerable:!0,get:function(){return C.EventHandlingBase}}),Object.defineProperty(t,"EventList",{enumerable:!0,get:function(){return H.EventList}}),Object.defineProperty(t,"NonUniformEventList",{enumerable:!0,get:function(){return A.NonUniformEventList}})}),T=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleEventDispatcher=void 0,t.SimpleEventDispatcher=class extends M.DispatcherBase{constructor(){super()}dispatch(e){const t=this._dispatch(!1,this,arguments);if(null==t)throw new M.DispatchError("Got `null` back from dispatch.");return t}dispatchAsync(e){this._dispatch(!0,this,arguments)}asEvent(){return super.asEvent()}}}),U=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleEventList=void 0,t.SimpleEventList=class extends M.EventListBase{constructor(){super()}createDispatcher(){return new T.SimpleEventDispatcher}}}),I=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleEventHandlingBase=void 0,t.SimpleEventHandlingBase=class extends M.HandlingBase{constructor(){super(new U.SimpleEventList)}}}),W=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformSimpleEventList=void 0,t.NonUniformSimpleEventList=class{constructor(){this._events={}}get(e){if(this._events[e])return this._events[e];const t=this.createDispatcher();return this._events[e]=t,t}remove(e){delete this._events[e]}createDispatcher(){return new T.SimpleEventDispatcher}}}),R=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformSimpleEventList=t.SimpleEventList=t.SimpleEventHandlingBase=t.SimpleEventDispatcher=void 0,Object.defineProperty(t,"SimpleEventDispatcher",{enumerable:!0,get:function(){return T.SimpleEventDispatcher}}),Object.defineProperty(t,"SimpleEventHandlingBase",{enumerable:!0,get:function(){return I.SimpleEventHandlingBase}}),Object.defineProperty(t,"NonUniformSimpleEventList",{enumerable:!0,get:function(){return W.NonUniformSimpleEventList}}),Object.defineProperty(t,"SimpleEventList",{enumerable:!0,get:function(){return U.SimpleEventList}})}),F=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SignalDispatcher=void 0,t.SignalDispatcher=class extends M.DispatcherBase{dispatch(){const e=this._dispatch(!1,this,arguments);if(null==e)throw new M.DispatchError("Got `null` back from dispatch.");return e}dispatchAsync(){this._dispatch(!0,this,arguments)}asEvent(){return super.asEvent()}}}),G=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SignalList=void 0,t.SignalList=class extends M.EventListBase{constructor(){super()}createDispatcher(){return new F.SignalDispatcher}}}),V=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SignalHandlingBase=void 0,t.SignalHandlingBase=class extends M.HandlingBase{constructor(){super(new G.SignalList)}}}),Q=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SignalList=t.SignalHandlingBase=t.SignalDispatcher=void 0,Object.defineProperty(t,"SignalDispatcher",{enumerable:!0,get:function(){return F.SignalDispatcher}}),Object.defineProperty(t,"SignalHandlingBase",{enumerable:!0,get:function(){return V.SignalHandlingBase}}),Object.defineProperty(t,"SignalList",{enumerable:!0,get:function(){return G.SignalList}})}),K=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseEventDispatcher=void 0,t.PromiseEventDispatcher=class extends M.PromiseDispatcherBase{constructor(){super()}async dispatch(e,t){const n=await this._dispatchAsPromise(!1,this,arguments);if(null==n)throw new M.DispatchError("Got `null` back from dispatch.");return n}dispatchAsync(e,t){this._dispatchAsPromise(!0,this,arguments)}asEvent(){return super.asEvent()}}}),Y=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseEventList=void 0,t.PromiseEventList=class extends M.EventListBase{constructor(){super()}createDispatcher(){return new K.PromiseEventDispatcher}}}),J=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseEventHandlingBase=void 0,t.PromiseEventHandlingBase=class extends M.HandlingBase{constructor(){super(new Y.PromiseEventList)}}}),q=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformPromiseEventList=void 0,t.NonUniformPromiseEventList=class{constructor(){this._events={}}get(e){if(this._events[e])return this._events[e];const t=this.createDispatcher();return this._events[e]=t,t}remove(e){delete this._events[e]}createDispatcher(){return new K.PromiseEventDispatcher}}}),z=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformPromiseEventList=t.PromiseEventList=t.PromiseEventHandlingBase=t.PromiseEventDispatcher=void 0,Object.defineProperty(t,"PromiseEventDispatcher",{enumerable:!0,get:function(){return K.PromiseEventDispatcher}}),Object.defineProperty(t,"PromiseEventHandlingBase",{enumerable:!0,get:function(){return J.PromiseEventHandlingBase}}),Object.defineProperty(t,"PromiseEventList",{enumerable:!0,get:function(){return Y.PromiseEventList}}),Object.defineProperty(t,"NonUniformPromiseEventList",{enumerable:!0,get:function(){return q.NonUniformPromiseEventList}})}),$=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSignalDispatcher=void 0,t.PromiseSignalDispatcher=class extends M.PromiseDispatcherBase{constructor(){super()}async dispatch(){const e=await this._dispatchAsPromise(!1,this,arguments);if(null==e)throw new M.DispatchError("Got `null` back from dispatch.");return e}dispatchAsync(){this._dispatchAsPromise(!0,this,arguments)}asEvent(){return super.asEvent()}}}),X=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSignalList=void 0,t.PromiseSignalList=class extends M.EventListBase{constructor(){super()}createDispatcher(){return new $.PromiseSignalDispatcher}}}),Z=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSignalHandlingBase=void 0,t.PromiseSignalHandlingBase=class extends M.HandlingBase{constructor(){super(new X.PromiseSignalList)}}}),ee=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSignalList=t.PromiseSignalHandlingBase=t.PromiseSignalDispatcher=void 0,Object.defineProperty(t,"PromiseSignalDispatcher",{enumerable:!0,get:function(){return $.PromiseSignalDispatcher}}),Object.defineProperty(t,"PromiseSignalHandlingBase",{enumerable:!0,get:function(){return Z.PromiseSignalHandlingBase}}),Object.defineProperty(t,"PromiseSignalList",{enumerable:!0,get:function(){return X.PromiseSignalList}})}),te=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSimpleEventDispatcher=void 0,t.PromiseSimpleEventDispatcher=class extends M.PromiseDispatcherBase{constructor(){super()}async dispatch(e){const t=await this._dispatchAsPromise(!1,this,arguments);if(null==t)throw new M.DispatchError("Got `null` back from dispatch.");return t}dispatchAsync(e){this._dispatchAsPromise(!0,this,arguments)}asEvent(){return super.asEvent()}}}),ne=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformPromiseSimpleEventList=void 0,t.NonUniformPromiseSimpleEventList=class{constructor(){this._events={}}get(e){if(this._events[e])return this._events[e];const t=this.createDispatcher();return this._events[e]=t,t}remove(e){delete this._events[e]}createDispatcher(){return new te.PromiseSimpleEventDispatcher}}}),re=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSimpleEventList=void 0,t.PromiseSimpleEventList=class extends M.EventListBase{constructor(){super()}createDispatcher(){return new te.PromiseSimpleEventDispatcher}}}),ie=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSimpleEventHandlingBase=void 0,t.PromiseSimpleEventHandlingBase=class extends M.HandlingBase{constructor(){super(new re.PromiseSimpleEventList)}}}),oe=E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformPromiseSimpleEventList=t.PromiseSimpleEventList=t.PromiseSimpleEventHandlingBase=t.PromiseSimpleEventDispatcher=void 0,Object.defineProperty(t,"NonUniformPromiseSimpleEventList",{enumerable:!0,get:function(){return ne.NonUniformPromiseSimpleEventList}}),Object.defineProperty(t,"PromiseSimpleEventDispatcher",{enumerable:!0,get:function(){return te.PromiseSimpleEventDispatcher}}),Object.defineProperty(t,"PromiseSimpleEventHandlingBase",{enumerable:!0,get:function(){return ie.PromiseSimpleEventHandlingBase}}),Object.defineProperty(t,"PromiseSimpleEventList",{enumerable:!0,get:function(){return re.PromiseSimpleEventList}})});E(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformPromiseSimpleEventList=t.PromiseSimpleEventList=t.PromiseSimpleEventHandlingBase=t.PromiseSimpleEventDispatcher=t.PromiseSignalList=t.PromiseSignalHandlingBase=t.PromiseSignalDispatcher=t.NonUniformPromiseEventList=t.PromiseEventList=t.PromiseEventHandlingBase=t.PromiseEventDispatcher=t.SignalList=t.SignalHandlingBase=t.SignalDispatcher=t.NonUniformSimpleEventList=t.SimpleEventList=t.SimpleEventHandlingBase=t.SimpleEventDispatcher=t.NonUniformEventList=t.EventList=t.EventHandlingBase=t.EventDispatcher=t.HandlingBase=t.PromiseDispatcherBase=t.PromiseSubscription=t.DispatchError=t.EventManagement=t.EventListBase=t.DispatcherWrapper=t.DispatcherBase=t.Subscription=void 0,Object.defineProperty(t,"Subscription",{enumerable:!0,get:function(){return M.Subscription}}),Object.defineProperty(t,"DispatcherBase",{enumerable:!0,get:function(){return M.DispatcherBase}}),Object.defineProperty(t,"DispatcherWrapper",{enumerable:!0,get:function(){return M.DispatcherWrapper}}),Object.defineProperty(t,"EventListBase",{enumerable:!0,get:function(){return M.EventListBase}}),Object.defineProperty(t,"EventManagement",{enumerable:!0,get:function(){return M.EventManagement}}),Object.defineProperty(t,"DispatchError",{enumerable:!0,get:function(){return M.DispatchError}}),Object.defineProperty(t,"PromiseSubscription",{enumerable:!0,get:function(){return M.PromiseSubscription}}),Object.defineProperty(t,"PromiseDispatcherBase",{enumerable:!0,get:function(){return M.PromiseDispatcherBase}}),Object.defineProperty(t,"HandlingBase",{enumerable:!0,get:function(){return M.HandlingBase}}),Object.defineProperty(t,"EventDispatcher",{enumerable:!0,get:function(){return N.EventDispatcher}}),Object.defineProperty(t,"EventHandlingBase",{enumerable:!0,get:function(){return N.EventHandlingBase}}),Object.defineProperty(t,"EventList",{enumerable:!0,get:function(){return N.EventList}}),Object.defineProperty(t,"NonUniformEventList",{enumerable:!0,get:function(){return N.NonUniformEventList}}),Object.defineProperty(t,"SimpleEventDispatcher",{enumerable:!0,get:function(){return R.SimpleEventDispatcher}}),Object.defineProperty(t,"SimpleEventHandlingBase",{enumerable:!0,get:function(){return R.SimpleEventHandlingBase}}),Object.defineProperty(t,"SimpleEventList",{enumerable:!0,get:function(){return R.SimpleEventList}}),Object.defineProperty(t,"NonUniformSimpleEventList",{enumerable:!0,get:function(){return R.NonUniformSimpleEventList}}),Object.defineProperty(t,"SignalDispatcher",{enumerable:!0,get:function(){return Q.SignalDispatcher}}),Object.defineProperty(t,"SignalHandlingBase",{enumerable:!0,get:function(){return Q.SignalHandlingBase}}),Object.defineProperty(t,"SignalList",{enumerable:!0,get:function(){return Q.SignalList}}),Object.defineProperty(t,"PromiseEventDispatcher",{enumerable:!0,get:function(){return z.PromiseEventDispatcher}}),Object.defineProperty(t,"PromiseEventHandlingBase",{enumerable:!0,get:function(){return z.PromiseEventHandlingBase}}),Object.defineProperty(t,"PromiseEventList",{enumerable:!0,get:function(){return z.PromiseEventList}}),Object.defineProperty(t,"NonUniformPromiseEventList",{enumerable:!0,get:function(){return z.NonUniformPromiseEventList}}),Object.defineProperty(t,"PromiseSignalDispatcher",{enumerable:!0,get:function(){return ee.PromiseSignalDispatcher}}),Object.defineProperty(t,"PromiseSignalHandlingBase",{enumerable:!0,get:function(){return ee.PromiseSignalHandlingBase}}),Object.defineProperty(t,"PromiseSignalList",{enumerable:!0,get:function(){return ee.PromiseSignalList}}),Object.defineProperty(t,"PromiseSimpleEventDispatcher",{enumerable:!0,get:function(){return oe.PromiseSimpleEventDispatcher}}),Object.defineProperty(t,"PromiseSimpleEventHandlingBase",{enumerable:!0,get:function(){return oe.PromiseSimpleEventHandlingBase}}),Object.defineProperty(t,"PromiseSimpleEventList",{enumerable:!0,get:function(){return oe.PromiseSimpleEventList}}),Object.defineProperty(t,"NonUniformPromiseSimpleEventList",{enumerable:!0,get:function(){return oe.NonUniformPromiseSimpleEventList}})});var se=0;function ae(e){return"__private_"+se+++"_"+e}function ce(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}function ue(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}Boolean("object"!=typeof process||"[object process]"!==String(process)||process.browser),"undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);var le="object"!=typeof process||"[object process]"!==String(process)||process.browser,pe="undefined"!=typeof window&&void 0!==window.orientation;function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function fe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==he(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===he(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}"undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);var de=/*#__PURE__*/function(){function e(e,t){var n=this;fe(this,"name",void 0),fe(this,"workerThread",void 0),fe(this,"isRunning",!0),fe(this,"result",void 0),fe(this,"_resolve",function(){}),fe(this,"_reject",function(){}),this.name=e,this.workerThread=t,this.result=new Promise(function(e,t){n._resolve=e,n._reject=t})}var t=e.prototype;return t.postMessage=function(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})},t.done=function(e){ue(this.isRunning),this.isRunning=!1,this._resolve(e)},t.error=function(e){ue(this.isRunning),this.isRunning=!1,this._reject(e)},e}(),ve=/*#__PURE__*/function(){function e(){}return e.prototype.terminate=function(){},e}(),me=new Map;function ge(e){var t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function be(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=n||new Set;if(e)if(ye(e))r.add(e);else if(ye(e.buffer))r.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"==typeof e)for(var i in e)be(e[i],t,r);return void 0===n?Array.from(r):[]}function ye(e){return!!e&&(e instanceof ArrayBuffer||"undefined"!=typeof MessagePort&&e instanceof MessagePort||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)}var Pe=function(){},Ee=/*#__PURE__*/function(){function e(e){fe(this,"name",void 0),fe(this,"source",void 0),fe(this,"url",void 0),fe(this,"terminated",!1),fe(this,"worker",void 0),fe(this,"onMessage",void 0),fe(this,"onError",void 0),fe(this,"_loadableURL","");var t=e.name,n=e.source,r=e.url;ue(n||r),this.name=t,this.source=n,this.url=r,this.onMessage=Pe,this.onError=function(e){return console.log(e)},this.worker=le?this._createBrowserWorker():this._createNodeWorker()}e.isSupported=function(){return"undefined"!=typeof Worker&&le||void 0!==ve&&!le};var t=e.prototype;return t.destroy=function(){this.onMessage=Pe,this.onError=Pe,this.worker.terminate(),this.terminated=!0},t.postMessage=function(e,t){t=t||be(e),this.worker.postMessage(e,t)},t._getErrorFromErrorEvent=function(e){var t="Failed to load ";return t+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)},t._createBrowserWorker=function(){var e=this;this._loadableURL=function(e){ue(e.source&&!e.url||!e.source&&e.url);var t,n=me.get(e.source||e.url);return n||(e.url&&(n=(t=e.url).startsWith("http")?ge("try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")):t,me.set(e.url,n)),e.source&&(n=ge(e.source),me.set(e.source,n))),ue(n),n}({source:this.source,url:this.url});var t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=function(t){t.data?e.onMessage(t.data):e.onError(new Error("No data received"))},t.onerror=function(t){e.onError(e._getErrorFromErrorEvent(t)),e.terminated=!0},t.onmessageerror=function(e){return console.error(e)},t},t._createNodeWorker=function(){var e,t=this;if(this.url){var n=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new ve(n,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new ve(this.source,{eval:!0})}return e.on("message",function(e){t.onMessage(e)}),e.on("error",function(e){t.onError(e)}),e.on("exit",function(e){}),e},r(e,[{key:"isRunning",get:function(){return Boolean(this.onMessage)}}]),e}(),_e=/*#__PURE__*/function(){function e(e){fe(this,"name","unnamed"),fe(this,"source",void 0),fe(this,"url",void 0),fe(this,"maxConcurrency",1),fe(this,"maxMobileConcurrency",1),fe(this,"onDebug",function(){}),fe(this,"reuseWorkers",!0),fe(this,"props",{}),fe(this,"jobQueue",[]),fe(this,"idleQueue",[]),fe(this,"count",0),fe(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}e.isSupported=function(){return Ee.isSupported()};var t=e.prototype;return t.destroy=function(){this.idleQueue.forEach(function(e){return e.destroy()}),this.isDestroyed=!0},t.setProps=function(e){this.props=i({},this.props,e),void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)},t.startJob=function(e){try{var t=arguments,n=this,r=t.length>1&&void 0!==t[1]?t[1]:function(e,t,n){return e.done(n)},i=t.length>2&&void 0!==t[2]?t[2]:function(e,t){return e.error(t)},o=new Promise(function(t){return n.jobQueue.push({name:e,onMessage:r,onError:i,onStart:t}),n});return n._startQueuedJob(),Promise.resolve(o)}catch(e){return Promise.reject(e)}},t._startQueuedJob=function(){try{var e=this;if(!e.jobQueue.length)return Promise.resolve();var t=e._getAvailableWorker();if(!t)return Promise.resolve();var n=e.jobQueue.shift(),r=function(){if(n){e.onDebug({message:"Starting job",name:n.name,workerThread:t,backlog:e.jobQueue.length});var r=new de(n.name,t);t.onMessage=function(e){return n.onMessage(r,e.type,e.payload)},t.onError=function(e){return n.onError(r,e)},n.onStart(r);var i=function(e,t){try{var n=Promise.resolve(r.result).then(function(){})}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}(0,function(n,r){if(e.returnWorkerToQueue(t),n)throw r;return r});if(i&&i.then)return i.then(function(){})}}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},t.returnWorkerToQueue=function(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()},t._getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;var e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Ee({name:e,source:this.source,url:this.url})}return null},t._getMaxConcurrency=function(){return pe?this.maxMobileConcurrency:this.maxConcurrency},e}(),Se={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:function(){}},we=/*#__PURE__*/function(){function e(e){fe(this,"props",void 0),fe(this,"workerPools",new Map),this.props=i({},Se),this.setProps(e),this.workerPools=new Map}e.isSupported=function(){return Ee.isSupported()},e.getWorkerFarm=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e._workerFarm=e._workerFarm||new e({})).setProps(t),e._workerFarm};var t=e.prototype;return t.destroy=function(){for(var e,t=s(this.workerPools.values());!(e=t()).done;)e.value.destroy();this.workerPools=new Map},t.setProps=function(e){this.props=i({},this.props,e);for(var t,n=s(this.workerPools.values());!(t=n()).done;)t.value.setProps(this._getWorkerPoolProps())},t.getWorkerPool=function(e){var t=e.name,n=e.source,r=e.url,i=this.workerPools.get(t);return i||((i=new _e({name:t,source:n,url:r})).setProps(this._getWorkerPoolProps()),this.workerPools.set(t,i)),i},t._getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}},e}();fe(we,"_workerFarm",void 0),e.createVec3(),e.createVec3(),e.createMat4();var je=/*#__PURE__*/ae("positionsDecompressed"),Oe=/*#__PURE__*/ae("positionsWorld"),De=new(/*#__PURE__*/function(){function n(){this.object=void 0,this.mesh=void 0,this.meshIndex=void 0,this.geometry=void 0,this.geometryBucket=void 0,this.geometryBucketIndex=void 0,Object.defineProperty(this,je,{writable:!0,value:void 0}),Object.defineProperty(this,Oe,{writable:!0,value:void 0}),this.object=null,this.mesh=null,this.meshIndex=0,this.geometry=null,this.geometryBucket=null,this.geometryBucketIndex=0,ce(this,je)[je]=null,ce(this,Oe)[Oe]=null}return n.prototype.reset=function(){ce(this,je)[je]=null,ce(this,Oe)[Oe]=null},function(e,t,n){t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,"symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key))?i:String(i),r)}var i}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"totalGeometryBuckets",get:function(){var e=0;if(this.object)for(var t=0,n=this.object.meshes.length;t<n;t++)e+=this.object.meshes[t].geometry.geometryBuckets.length;return e}},{key:"numPrimitives",get:function(){var e=this.geometry.primitive;return this.geometryBucket.indices.length/(20002===e?3:20001===e?2:1)}},{key:"positionsDecompressed",get:function(){return ce(this,je)[je]||(ce(this,je)[je]=new Float32Array(this.geometryBucket.positionsCompressed.length),t.decompressPositions3(this.geometryBucket.positionsCompressed,this.geometry.positionsDecompressMatrix,ce(this,je)[je])),ce(this,je)[je]}},{key:"positionsWorld",get:function(){if(!ce(this,Oe)[Oe]){var t=this.positionsDecompressed;ce(this,Oe)[Oe]=new Float64Array(t.length),e.transformPositions3(t,this.mesh.matrix,ce(this,Oe)[Oe])}return ce(this,Oe)[Oe]}},{key:"uvsDecompressed",get:function(){return null}}]),n}());function Le(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||function(e){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;var t="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent;return!!(t&&t.indexOf("Electron")>=0)}()}e.createVec3(),e.createVec3(),e.createVec3(),e.createVec3(),e.createVec3(),e.createVec3(),e.createVec3();var Be={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"==typeof process&&process},xe=Be.window||Be.self||Be.global,Me=Be.process||{},ke="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";Le();var He,Ce,Ae=/*#__PURE__*/function(){function e(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";fe(this,"storage",void 0),fe(this,"id",void 0),fe(this,"config",void 0),this.storage=function(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(e){return null}}(n),this.id=e,this.config=t,this._loadConfiguration()}var t=e.prototype;return t.getConfiguration=function(){return this.config},t.setConfiguration=function(e){if(Object.assign(this.config,e),this.storage){var t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}},t._loadConfiguration=function(){var e={};if(this.storage){var t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this},e}();function Ne(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>r&&(n=Math.min(n,r/e.width));var o=e.width*n,s=e.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),a]}function Te(e){return"string"==typeof e?He[e.toUpperCase()]||He.WHITE:e}function Ue(e,t){if(!e)throw new Error(t||"Assertion failed")}function Ie(){var e,t,n;if(Le&&"performance"in xe)e=null==xe||null===(t=xe.performance)||void 0===t||null===(n=t.now)||void 0===n?void 0:n.call(t);else if("hrtime"in Me){var r,i=null==Me||null===(r=Me.hrtime)||void 0===r?void 0:r.call(Me);e=1e3*i[0]+i[1]/1e6}else e=Date.now();return e}(Ce=He||(He={}))[Ce.BLACK=30]="BLACK",Ce[Ce.RED=31]="RED",Ce[Ce.GREEN=32]="GREEN",Ce[Ce.YELLOW=33]="YELLOW",Ce[Ce.BLUE=34]="BLUE",Ce[Ce.MAGENTA=35]="MAGENTA",Ce[Ce.CYAN=36]="CYAN",Ce[Ce.WHITE=37]="WHITE",Ce[Ce.BRIGHT_BLACK=90]="BRIGHT_BLACK",Ce[Ce.BRIGHT_RED=91]="BRIGHT_RED",Ce[Ce.BRIGHT_GREEN=92]="BRIGHT_GREEN",Ce[Ce.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",Ce[Ce.BRIGHT_BLUE=94]="BRIGHT_BLUE",Ce[Ce.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",Ce[Ce.BRIGHT_CYAN=96]="BRIGHT_CYAN",Ce[Ce.BRIGHT_WHITE=97]="BRIGHT_WHITE";var We={debug:Le&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Re={enabled:!0,level:0};function Fe(){}var Ge={},Ve={once:!0},Qe=/*#__PURE__*/function(){function e(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""}).id;fe(this,"id",void 0),fe(this,"VERSION",ke),fe(this,"_startTs",Ie()),fe(this,"_deltaTs",Ie()),fe(this,"_storage",void 0),fe(this,"userData",{}),fe(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new Ae("__probe-".concat(this.id,"__"),Re),this.timeStamp("".concat(this.id," started")),function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],r=Object.getPrototypeOf(e),i=function(){var r=t.value;"function"==typeof e[r]&&(n.find(function(e){return r===e})||(e[r]=e[r].bind(e)))},o=s(Object.getOwnPropertyNames(r));!(t=o()).done;)i()}(this),Object.seal(this)}var t=e.prototype;return t.isEnabled=function(){return this._storage.config.enabled},t.getLevel=function(){return this._storage.config.level},t.getTotal=function(){return Number((Ie()-this._startTs).toPrecision(10))},t.getDelta=function(){return Number((Ie()-this._deltaTs).toPrecision(10))},t.getPriority=function(){return this.level},t.enable=function(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this},t.setLevel=function(e){return this._storage.setConfiguration({level:e}),this},t.get=function(e){return this._storage.config[e]},t.set=function(e,t){var n;this._storage.setConfiguration(((n={})[e]=t,n))},t.settings=function(){console.table?console.table(this._storage.config):console.log(this._storage.config)},t.assert=function(e,t){Ue(e,t)},t.warn=function(e){return this._getLogFunction(0,e,We.warn,arguments,Ve)},t.error=function(e){return this._getLogFunction(0,e,We.error,arguments)},t.deprecated=function(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))},t.removed=function(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))},t.probe=function(e,t){return this._getLogFunction(e,t,We.log,arguments,{time:!0,once:!0})},t.log=function(e,t){return this._getLogFunction(e,t,We.debug,arguments)},t.info=function(e,t){return this._getLogFunction(e,t,console.info,arguments)},t.once=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction(e,t,We.debug||We.info,arguments,Ve)},t.table=function(e,t,n){return t?this._getLogFunction(e,t,console.table||Fe,n&&[n],{tag:Je(t)}):Fe},t.image=function(e){var t=e.image,n=e.message,r=void 0===n?"":n,i=e.scale,o=void 0===i?1:i;return this._shouldLog(e.logLevel||e.priority)?Le?function(e){var t,n=e.image,r=e.message,i=void 0===r?"":r,o=e.scale,s=void 0===o?1:o;if("string"==typeof n){var a=new Image;return a.onload=function(){var e,t=Ne(a,i,s);(e=console).log.apply(e,t)},a.src=n,Fe}var c=n.nodeName||"";if("img"===c.toLowerCase())return(t=console).log.apply(t,Ne(n,i,s)),Fe;if("canvas"===c.toLowerCase()){var u=new Image;return u.onload=function(){var e;return(e=console).log.apply(e,Ne(u,i,s))},u.src=n.toDataURL(),Fe}return Fe}({image:t,message:r,scale:o}):(console.warn("removed"),Fe):Fe},t.time=function(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)},t.timeEnd=function(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)},t.timeStamp=function(e,t){return this._getLogFunction(e,t,console.timeStamp||Fe)},t.group=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},r=Ye({logLevel:e,message:t,opts:n});return r.method=(n.collapsed?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)},t.groupCollapsed=function(e,t){return this.group(e,t,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))},t.groupEnd=function(e){return this._getLogFunction(e,"",console.groupEnd||Fe)},t.withGroup=function(e,t,n){this.group(e,t)();try{n()}finally{this.groupEnd(e)()}},t.trace=function(){console.trace&&console.trace()},t._shouldLog=function(e){return this.isEnabled()&&this.getLevel()>=Ke(e)},t._getLogFunction=function(e,t,n,r,i){if(this._shouldLog(e)){var o;i=Ye({logLevel:e,message:t,args:r,opts:i}),Ue(n=n||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=Ie();var s=i.tag||i.message;if(i.once){if(Ge[s])return Fe;Ge[s]=Ie()}return t=function(e,t,n){if("string"==typeof t){var r=n.time?function(e){var t=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-e.length,0);return"".concat(" ".repeat(t)).concat(e)}(function(e){return e<10?"".concat(e.toFixed(2),"ms"):e<100?"".concat(e.toFixed(1),"ms"):e<1e3?"".concat(e.toFixed(0),"ms"):"".concat((e/1e3).toFixed(2),"s")}(n.total)):"";i=t=n.time?"".concat(e,": ").concat(r,"  ").concat(t):"".concat(e,": ").concat(t),o=n.color,s=n.background,Le||"string"!=typeof i||(o&&(o=Te(o),i="[".concat(o,"m").concat(i,"[39m")),s&&(o=Te(s),i="[".concat(s+10,"m").concat(i,"[49m"))),t=i}var i,o,s;return t}(this.id,i.message,i),(o=n).bind.apply(o,[console,t].concat(i.args))}return Fe},r(e,[{key:"level",get:function(){return this.getLevel()},set:function(e){this.setLevel(e)}},{key:"priority",get:function(){return this.level},set:function(e){this.level=e}}]),e}();function Ke(e){if(!e)return 0;var t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return Ue(Number.isFinite(t)&&t>=0),t}function Ye(e){var t=e.logLevel,n=e.message;e.logLevel=Ke(t);for(var r=e.args?Array.from(e.args):[];r.length&&r.shift()!==n;);switch(typeof t){case"string":case"function":void 0!==n&&r.unshift(n),e.message=t;break;case"object":Object.assign(e,t)}"function"==typeof e.message&&(e.message=e.message());var i=typeof e.message;return Ue("string"===i||"object"===i),Object.assign(e,{args:r},e.opts)}function Je(e){for(var t in e)for(var n in e[t])return n||"untitled";return"empty"}function qe(e){return new FloatArrayClass(e||4)}function ze(e){return new l(e||16)}function $e(e,t,n){return n[0]=e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],n[1]=e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],n[2]=e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],n[3]=e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],n}fe(Qe,"VERSION",ke),new Qe({id:"loaders.gl"}),new(/*#__PURE__*/function(){function e(){fe(this,"console",void 0),this.console=console}var t=e.prototype;return t.log=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.console.log).bind.apply(e,[this.console].concat(n))},t.info=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.console.info).bind.apply(e,[this.console].concat(n))},t.warn=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.console.warn).bind.apply(e,[this.console].concat(n))},t.error=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.console.error).bind.apply(e,[this.console].concat(n))},e}()),new Qe({id:"loaders.gl"}),qe(),qe(),new FloatArrayClass(2),exports.KdTree2=y,exports.KdVertex2=function(){this.sceneObject=void 0,this.worldPos=void 0,this.canvasPos=void 0},exports.createKdTree2FromSceneObjectVerts=function(t){var n=new y({aabb:t.canvasBoundary}),r=ze(t.viewMatrix),i=ze(t.projMatrix),o=function(t,n,r){var i=e.mulMat4(n,t,f),o=i[0],s=i[1],a=i[2],c=i[3],u=i[4],l=i[5],p=i[6],h=i[7],d=i[8],v=i[9],g=i[10],b=i[11],y=i[12],P=i[13],E=i[14],_=i[15];return(r=r||new m).planes[0].set(c-o,h-u,b-d,_-y),r.planes[1].set(c+o,h+u,b+d,_+y),r.planes[2].set(c-s,h-l,b-v,_-P),r.planes[3].set(c+s,h+l,b+v,_+P),r.planes[4].set(c-a,h-p,b-g,_-E),r.planes[5].set(c+a,h+p,b+g,_+E),r}(r,i),s=t.canvasBoundary,a=t.sceneObjects;if(a)for(var c=0,u=a.length;c<u;c++)l(a[c]);function l(e,t){void 0===t&&(t=2),1!==t&&(t=function(e,t){var n=1,r=p,i=h;r[0]=t[0],r[1]=t[1],r[2]=t[2],i[0]=t[3],i[1]=t[4],i[2]=t[5];for(var o=[r,i],s=0;s<6;++s){var a=e.planes[s];if(a.normal[0]*o[a.testVertex[0]][0]+a.normal[1]*o[a.testVertex[1]][1]+a.normal[2]*o[a.testVertex[2]][2]+a.offset<0)return 3;a.normal[0]*o[1-a.testVertex[0]][0]+a.normal[1]*o[1-a.testVertex[1]][1]+a.normal[2]*o[1-a.testVertex[2]][2]+a.offset<0&&(n=2)}return n}(o,e.aabb)),3!==t&&function(e,t){De.reset(),De.object=e;for(var n=0,r=e.meshes.length;n<r;n++){var i=e.meshes[n];De.mesh=i,De.meshIndex=n;var o=i.geometry;De.geometry=o;for(var s=0,a=o.geometryBuckets.length;s<a;s++)if(De.geometryBucket=o.geometryBuckets[s],De.geometryBucketIndex=s,t(De))return!0}}(e,function(t){for(var n=t.positionsWorld,r=0,i=n.length;r<i;r+=3){var o=qe();o[0]=n[r],o[1]=n[r+1],o[2]=n[r+2],o[3]=1,d(e,o)}return!1})}function d(e,t){var o=qe(),a=qe(),c=new Uint16Array(2);$e(r,t,o),$e(i,o,a),c[0]=Math.floor((1+a[0]/a[3])*s[2]/2),c[1]=Math.floor((1-a[1]/a[3])*s[3]/2),n.insertItem({sceneObject:e,worldPos:t,canvasPos:c},[c[0],c[1],c[0],c[1]])}return n},exports.searchKdTree2ForNearestNeighbor=function(e){return[]};
//# sourceMappingURL=index.js.map
