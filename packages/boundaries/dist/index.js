var t=require("@xeokit/matrix"),e=require("@xeokit/math"),r=require("@xeokit/compression"),n=t.createVec3(),o=t.createVec3(),s=t.createMat4();function i(t){return new Float64Array(t||6)}function u(t){return new Int16Array(t||6)}function a(t){return e.newFloatArray(t||32)}var B,c,A,f,p=(B=e.newFloatArray(3),c=e.newFloatArray(3),A=e.newFloatArray(3),function(e){return B[0]=e[0],B[1]=e[1],B[2]=e[2],c[0]=e[3],c[1]=e[4],c[2]=e[5],t.subVec3(c,B,A),Math.abs(t.lenVec3(A))}),x=function(){var r=e.newFloatArray(3),n=e.newFloatArray(3),o=e.newFloatArray(3);return function(e,s){r[0]=e[0],r[1]=e[1],r[2]=e[2],n[0]=e[3],n[1]=e[4],n[2]=e[5];var i=t.subVec3(n,r,o),u=s[0]-e[0],a=e[3]-s[0],B=s[1]-e[1],c=e[4]-s[1],A=s[2]-e[2],f=e[5]-s[2];return i[0]+=u>a?u:a,i[1]+=B>c?B:c,i[2]+=A>f?A:f,Math.abs(t.lenVec3(i))}}(),l=(f=e.newFloatArray(3),function(t,n,o){n=n||i();for(var s,u,a,B=e.MAX_DOUBLE,c=e.MAX_DOUBLE,A=e.MAX_DOUBLE,p=e.MIN_DOUBLE,x=e.MIN_DOUBLE,l=e.MIN_DOUBLE,v=0,h=t.length;v<h;v+=3)o?(f[0]=t[v+0],f[1]=t[v+1],f[2]=t[v+2],r.decompressPoint3(f,o,f),s=f[0],u=f[1],a=f[2]):(s=t[v+0],u=t[v+1],a=t[v+2]),s<B&&(B=s),u<c&&(c=u),a<A&&(A=a),s>p&&(p=s),u>x&&(x=u),a>l&&(l=a);return n[0]=B,n[1]=c,n[2]=A,n[3]=p,n[4]=x,n[5]=l,n}),v=/*#__PURE__*/function(){function e(){this.testVertex=void 0,this.offset=void 0,this.normal=void 0,this.normal=t.createVec3(),this.offset=0,this.testVertex=t.createVec3()}return e.prototype.set=function(t,e,r,n){var o=1/Math.sqrt(t*t+e*e+r*r);this.normal[0]=t*o,this.normal[1]=e*o,this.normal[2]=r*o,this.offset=n*o,this.testVertex[0]=this.normal[0]>=0?1:0,this.testVertex[1]=this.normal[1]>=0?1:0,this.testVertex[2]=this.normal[2]>=0?1:0},e}(),h=function(){this.planes=void 0,this.planes=[new v,new v,new v,new v,new v,new v]};exports.AABB3ToOBB3=function(t,e){return void 0===t&&(t=i()),void 0===e&&(e=a()),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,e[4]=t[3],e[5]=t[1],e[6]=t[2],e[7]=1,e[8]=t[3],e[9]=t[4],e[10]=t[2],e[11]=1,e[12]=t[0],e[13]=t[4],e[14]=t[2],e[15]=1,e[16]=t[0],e[17]=t[1],e[18]=t[5],e[19]=1,e[20]=t[3],e[21]=t[1],e[22]=t[5],e[23]=1,e[24]=t[3],e[25]=t[4],e[26]=t[5],e[27]=1,e[28]=t[0],e[29]=t[4],e[30]=t[5],e[31]=1,e},exports.ABB3ToOBB3=function(t,e){return void 0===e&&(e=a()),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,e[4]=t[3],e[5]=t[1],e[6]=t[2],e[7]=1,e[8]=t[3],e[9]=t[4],e[10]=t[2],e[11]=1,e[12]=t[0],e[13]=t[4],e[14]=t[2],e[15]=1,e[16]=t[0],e[17]=t[1],e[18]=t[5],e[19]=1,e[20]=t[3],e[21]=t[1],e[22]=t[5],e[23]=1,e[24]=t[3],e[25]=t[4],e[26]=t[5],e[27]=1,e[28]=t[0],e[29]=t[4],e[30]=t[5],e[31]=1,e},exports.Frustum3=h,exports.FrustumPlane3=v,exports.INSIDE=1,exports.INTERSECT=2,exports.OBB3ToAABB3=function(t,r){void 0===r&&(r=i());for(var n,o,s,u=e.MAX_DOUBLE,a=e.MAX_DOUBLE,B=e.MAX_DOUBLE,c=e.MIN_DOUBLE,A=e.MIN_DOUBLE,f=e.MIN_DOUBLE,p=0,x=t.length;p<x;p+=4)(n=t[p+0])<u&&(u=n),(o=t[p+1])<a&&(a=o),(s=t[p+2])<B&&(B=s),n>c&&(c=n),o>A&&(A=o),s>f&&(f=s);return r[0]=u,r[1]=a,r[2]=B,r[3]=c,r[4]=A,r[5]=f,r},exports.OUTSIDE=3,exports.collapseAABB3=function(t){return void 0===t&&(t=i()),t[0]=e.MAX_DOUBLE,t[1]=e.MAX_DOUBLE,t[2]=e.MAX_DOUBLE,t[3]=e.MIN_DOUBLE,t[4]=e.MIN_DOUBLE,t[5]=e.MIN_DOUBLE,t},exports.collapseAABB3Int16=function(t){return void 0===t&&(t=u()),t[0]=65535,t[1]=65535,t[2]=65535,t[3]=-65535,t[4]=-65535,t[5]=-65535,t},exports.containsAABB2=function(t,e){return t[0]<=e[0]&&e[3]<=t[3]&&t[1]<=e[1]&&t[2]<=e[2]},exports.containsAABB2Point2=function(t,e){return t[0]<=e[0]&&e[0]<=t[3]&&t[1]<=e[1]&&e[1]<=t[4]},exports.containsAABB3=function(t,e){return t[0]<=e[0]&&e[3]<=t[3]&&t[1]<=e[1]&&e[4]<=t[4]&&t[2]<=e[2]&&e[5]<=t[5]},exports.containsAABB3Point3=function(t,e){return t[0]<=e[0]&&e[0]<=t[3]&&t[1]<=e[1]&&e[1]<=t[4]&&t[2]<=e[2]&&e[2]<=t[5]},exports.createAABB2=function(t){return e.newFloatArray(t||4)},exports.createAABB3=i,exports.createAABB3Int16=u,exports.createOBB2=function(t){return e.newFloatArray(t||16)},exports.createOBB3=a,exports.createSphere3=function(t,r,n,o){return e.newFloatArray([t,r,n,o])},exports.expandAABB2=function(t,e){return t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[3]<e[3]&&(t[3]=e[3]),t[4]<e[4]&&(t[4]=e[4]),t},exports.expandAABB2Point2=function(t,e){return t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[3]<e[0]&&(t[3]=e[0]),t[4]<e[1]&&(t[4]=e[1]),t},exports.expandAABB3=function(t,e){return t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]>e[2]&&(t[2]=e[2]),t[3]<e[3]&&(t[3]=e[3]),t[4]<e[4]&&(t[4]=e[4]),t[5]<e[5]&&(t[5]=e[5]),t},exports.expandAABB3Point3=function(t,e){return t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]>e[2]&&(t[2]=e[2]),t[3]<e[0]&&(t[3]=e[0]),t[4]<e[1]&&(t[4]=e[1]),t[5]<e[2]&&(t[5]=e[2]),t},exports.expandAABB3Points3=function(t,e){for(var r,n,o,s=0,i=e.length;s<i;s+=3)n=e[s+1],o=e[s+2],t[0]>(r=e[s])&&(t[0]=r),t[1]>n&&(t[1]=n),t[2]>o&&(t[2]=o),t[3]<r&&(t[3]=r),t[4]<n&&(t[4]=n),t[5]<o&&(t[5]=o);return t},exports.getAABB2Center=function(e,r){return void 0===r&&(r=t.createVec2()),r[0]=(e[2]+e[0])/2,r[1]=(e[3]+e[1])/2,r},exports.getAABB3Area=function(t){return(t[3]-t[0])*(t[4]-t[1])*(t[5]-t[2])},exports.getAABB3Center=function(e,r){return void 0===r&&(r=t.createVec3()),r[0]=(e[0]+e[3])/2,r[1]=(e[1]+e[4])/2,r[2]=(e[2]+e[5])/2,r},exports.getAABB3Diag=p,exports.getAABB3DiagPoint=x,exports.getPositions3Center=function(e,r){void 0===r&&(r=t.createVec3());for(var n=0,o=0,s=0,i=0,u=e.length;i<u;i+=3)n+=e[i+0],o+=e[i+1],s+=e[i+2];var a=e.length/3;return r[0]=n/a,r[1]=o/a,r[2]=s/a,r},exports.intersectAABB3Lines3=function(t,e,r){return!1},exports.intersectAABB3Positions3=function(t,e){for(var r=t[0],n=t[1],o=t[2],s=t[3],i=t[4],u=t[5],a=0,B=e.length;a<B;a+=3){var c=e[a];if(r<=c&&c<=s){var A=e[a+1];if(n<=A&&A<=i){var f=e[a+2];if(o<=f&&f<=u)return!0}}}return!1},exports.intersectAABB3Triangles3=function(t,e,r){return!1},exports.intersectAABB3s=function(t,e){return 2},exports.intersectFrustum3AABB3=function(t,e){var r=1,s=n,i=o;s[0]=e[0],s[1]=e[1],s[2]=e[2],i[0]=e[3],i[1]=e[4],i[2]=e[5];for(var u=[s,i],a=0;a<6;++a){var B=t.planes[a];if(B.normal[0]*u[B.testVertex[0]][0]+B.normal[1]*u[B.testVertex[1]][1]+B.normal[2]*u[B.testVertex[2]][2]+B.offset<0)return 3;B.normal[0]*u[1-B.testVertex[0]][0]+B.normal[1]*u[1-B.testVertex[1]][1]+B.normal[2]*u[1-B.testVertex[2]][2]+B.offset<0&&(r=2)}return r},exports.intersectFrustum3Lines3=function(t,e,r){return!0},exports.intersectFrustum3Point3=function(t,e){return!0},exports.intersectFrustum3Positions3=function(t,e){return!0},exports.intersectFrustum3Triangle3=function(t,e,r,n){return!0},exports.intersectFrustum3Triangles3=function(t,e,r){return!0},exports.points3ToAABB3=function(t,r){void 0===r&&(r=i());for(var n,o,s,u=e.MAX_DOUBLE,a=e.MAX_DOUBLE,B=e.MAX_DOUBLE,c=e.MIN_DOUBLE,A=e.MIN_DOUBLE,f=e.MIN_DOUBLE,p=0,x=t.length;p<x;p++)(n=t[p][0])<u&&(u=n),(o=t[p][1])<a&&(a=o),(s=t[p][2])<B&&(B=s),n>c&&(c=n),o>A&&(A=o),s>f&&(f=s);return r[0]=u,r[1]=a,r[2]=B,r[3]=c,r[4]=A,r[5]=f,r},exports.positions3ToAABB3=l,exports.setFrustum3=function(e,r,n){var o=t.mulMat4(r,e,s),i=o[0],u=o[1],a=o[2],B=o[3],c=o[4],A=o[5],f=o[6],p=o[7],x=o[8],l=o[9],v=o[10],O=o[11],m=o[12],M=o[13],D=o[14],E=o[15];return(n=n||new h).planes[0].set(B-i,p-c,O-x,E-m),n.planes[1].set(B+i,p+c,O+x,E+m),n.planes[2].set(B-u,p-A,O-l,E-M),n.planes[3].set(B+u,p+A,O+l,E+M),n.planes[4].set(B-a,p-f,O-v,E-D),n.planes[5].set(B+a,p+f,O+v,E+D),n},exports.transformOBB3=function(t,e,r){var n;void 0===r&&(r=e);var o,s,i,u=e.length,a=t[0],B=t[1],c=t[2],A=t[3],f=t[4],p=t[5],x=t[6],l=t[7],v=t[8],h=t[9],O=t[10],m=t[11],M=t[12],D=t[13],E=t[14],L=t[15];for(n=0;n<u;n+=4)r[n+0]=a*(o=e[n+0])+f*(s=e[n+1])+v*(i=e[n+2])+M,r[n+1]=B*o+p*s+h*i+D,r[n+2]=c*o+x*s+O*i+E,r[n+3]=A*o+l*s+m*i+L;return r};
//# sourceMappingURL=index.js.map
