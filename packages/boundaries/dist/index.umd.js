!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@xeokit/matrix"),require("@xeokit/math"),require("@xeokit/compression")):"function"==typeof define&&define.amd?define(["exports","@xeokit/matrix","@xeokit/math","@xeokit/compression"],e):e((t||self).boundaries={},t.matrix,t.math,t.compression)}(this,function(t,e,n,r){var o=e.createVec3(),i=e.createVec3(),u=e.createMat4();function a(t){return new Float64Array(t||6)}function s(t){return new Int16Array(t||6)}function c(t){return n.newFloatArray(t||32)}var B,A,f,l,m=(B=n.newFloatArray(3),A=n.newFloatArray(3),f=n.newFloatArray(3),function(t){return B[0]=t[0],B[1]=t[1],B[2]=t[2],A[0]=t[3],A[1]=t[4],A[2]=t[5],e.subVec3(A,B,f),Math.abs(e.lenVec3(f))}),h=function(){var t=n.newFloatArray(3),r=n.newFloatArray(3),o=n.newFloatArray(3);return function(n,i){t[0]=n[0],t[1]=n[1],t[2]=n[2],r[0]=n[3],r[1]=n[4],r[2]=n[5];var u=e.subVec3(r,t,o),a=i[0]-n[0],s=n[3]-i[0],c=i[1]-n[1],B=n[4]-i[1],A=i[2]-n[2],f=n[5]-i[2];return u[0]+=a>s?a:s,u[1]+=c>B?c:B,u[2]+=A>f?A:f,Math.abs(e.lenVec3(u))}}(),v=(l=n.newFloatArray(3),function(t,e,o){e=e||a();for(var i,u,s,c=n.MAX_DOUBLE,B=n.MAX_DOUBLE,A=n.MAX_DOUBLE,f=n.MIN_DOUBLE,m=n.MIN_DOUBLE,h=n.MIN_DOUBLE,v=0,p=t.length;v<p;v+=3)o?(l[0]=t[v+0],l[1]=t[v+1],l[2]=t[v+2],r.decompressPoint3(l,o,l),i=l[0],u=l[1],s=l[2]):(i=t[v+0],u=t[v+1],s=t[v+2]),i<c&&(c=i),u<B&&(B=u),s<A&&(A=s),i>f&&(f=i),u>m&&(m=u),s>h&&(h=s);return e[0]=c,e[1]=B,e[2]=A,e[3]=f,e[4]=m,e[5]=h,e}),p=/*#__PURE__*/function(){function t(){this.testVertex=void 0,this.offset=void 0,this.normal=void 0,this.normal=e.createVec3(),this.offset=0,this.testVertex=e.createVec3()}return t.prototype.set=function(t,e,n,r){var o=1/Math.sqrt(t*t+e*e+n*n);this.normal[0]=t*o,this.normal[1]=e*o,this.normal[2]=n*o,this.offset=r*o,this.testVertex[0]=this.normal[0]>=0?1:0,this.testVertex[1]=this.normal[1]>=0?1:0,this.testVertex[2]=this.normal[2]>=0?1:0},t}(),d=function(){this.planes=void 0,this.planes=[new p,new p,new p,new p,new p,new p]};t.AABB3ToOBB3=function(t,e){return void 0===t&&(t=a()),void 0===e&&(e=c()),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,e[4]=t[3],e[5]=t[1],e[6]=t[2],e[7]=1,e[8]=t[3],e[9]=t[4],e[10]=t[2],e[11]=1,e[12]=t[0],e[13]=t[4],e[14]=t[2],e[15]=1,e[16]=t[0],e[17]=t[1],e[18]=t[5],e[19]=1,e[20]=t[3],e[21]=t[1],e[22]=t[5],e[23]=1,e[24]=t[3],e[25]=t[4],e[26]=t[5],e[27]=1,e[28]=t[0],e[29]=t[4],e[30]=t[5],e[31]=1,e},t.ABB3ToOBB3=function(t,e){return void 0===e&&(e=c()),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,e[4]=t[3],e[5]=t[1],e[6]=t[2],e[7]=1,e[8]=t[3],e[9]=t[4],e[10]=t[2],e[11]=1,e[12]=t[0],e[13]=t[4],e[14]=t[2],e[15]=1,e[16]=t[0],e[17]=t[1],e[18]=t[5],e[19]=1,e[20]=t[3],e[21]=t[1],e[22]=t[5],e[23]=1,e[24]=t[3],e[25]=t[4],e[26]=t[5],e[27]=1,e[28]=t[0],e[29]=t[4],e[30]=t[5],e[31]=1,e},t.Frustum3=d,t.FrustumPlane3=p,t.INSIDE=1,t.INTERSECT=2,t.OBB3ToAABB3=function(t,e){void 0===e&&(e=a());for(var r,o,i,u=n.MAX_DOUBLE,s=n.MAX_DOUBLE,c=n.MAX_DOUBLE,B=n.MIN_DOUBLE,A=n.MIN_DOUBLE,f=n.MIN_DOUBLE,l=0,m=t.length;l<m;l+=4)(r=t[l+0])<u&&(u=r),(o=t[l+1])<s&&(s=o),(i=t[l+2])<c&&(c=i),r>B&&(B=r),o>A&&(A=o),i>f&&(f=i);return e[0]=u,e[1]=s,e[2]=c,e[3]=B,e[4]=A,e[5]=f,e},t.OUTSIDE=3,t.collapseAABB3=function(t){return void 0===t&&(t=a()),t[0]=n.MAX_DOUBLE,t[1]=n.MAX_DOUBLE,t[2]=n.MAX_DOUBLE,t[3]=n.MIN_DOUBLE,t[4]=n.MIN_DOUBLE,t[5]=n.MIN_DOUBLE,t},t.collapseAABB3Int16=function(t){return void 0===t&&(t=s()),t[0]=65535,t[1]=65535,t[2]=65535,t[3]=-65535,t[4]=-65535,t[5]=-65535,t},t.containsAABB2=function(t,e){return t[0]<=e[0]&&e[3]<=t[3]&&t[1]<=e[1]&&t[2]<=e[2]},t.containsAABB2Point2=function(t,e){return t[0]<=e[0]&&e[0]<=t[3]&&t[1]<=e[1]&&e[1]<=t[4]},t.containsAABB3=function(t,e){return t[0]<=e[0]&&e[3]<=t[3]&&t[1]<=e[1]&&e[4]<=t[4]&&t[2]<=e[2]&&e[5]<=t[5]},t.containsAABB3Point3=function(t,e){return t[0]<=e[0]&&e[0]<=t[3]&&t[1]<=e[1]&&e[1]<=t[4]&&t[2]<=e[2]&&e[2]<=t[5]},t.createAABB2=function(t){return n.newFloatArray(t||4)},t.createAABB3=a,t.createAABB3Int16=s,t.createOBB2=function(t){return n.newFloatArray(t||16)},t.createOBB3=c,t.createSphere3=function(t,e,r,o){return n.newFloatArray([t,e,r,o])},t.expandAABB2=function(t,e){return t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[3]<e[3]&&(t[3]=e[3]),t[4]<e[4]&&(t[4]=e[4]),t},t.expandAABB2Point2=function(t,e){return t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[3]<e[0]&&(t[3]=e[0]),t[4]<e[1]&&(t[4]=e[1]),t},t.expandAABB3=function(t,e){return t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]>e[2]&&(t[2]=e[2]),t[3]<e[3]&&(t[3]=e[3]),t[4]<e[4]&&(t[4]=e[4]),t[5]<e[5]&&(t[5]=e[5]),t},t.expandAABB3Point3=function(t,e){return t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]>e[2]&&(t[2]=e[2]),t[3]<e[0]&&(t[3]=e[0]),t[4]<e[1]&&(t[4]=e[1]),t[5]<e[2]&&(t[5]=e[2]),t},t.expandAABB3Points3=function(t,e){for(var n,r,o,i=0,u=e.length;i<u;i+=3)r=e[i+1],o=e[i+2],t[0]>(n=e[i])&&(t[0]=n),t[1]>r&&(t[1]=r),t[2]>o&&(t[2]=o),t[3]<n&&(t[3]=n),t[4]<r&&(t[4]=r),t[5]<o&&(t[5]=o);return t},t.getAABB2Center=function(t,n){return void 0===n&&(n=e.createVec2()),n[0]=(t[2]+t[0])/2,n[1]=(t[3]+t[1])/2,n},t.getAABB3Area=function(t){return(t[3]-t[0])*(t[4]-t[1])*(t[5]-t[2])},t.getAABB3Center=function(t,n){return void 0===n&&(n=e.createVec3()),n[0]=(t[0]+t[3])/2,n[1]=(t[1]+t[4])/2,n[2]=(t[2]+t[5])/2,n},t.getAABB3Diag=m,t.getAABB3DiagPoint=h,t.getPositions3Center=function(t,n){void 0===n&&(n=e.createVec3());for(var r=0,o=0,i=0,u=0,a=t.length;u<a;u+=3)r+=t[u+0],o+=t[u+1],i+=t[u+2];var s=t.length/3;return n[0]=r/s,n[1]=o/s,n[2]=i/s,n},t.intersectAABB3Lines3=function(t,e,n){return!1},t.intersectAABB3Positions3=function(t,e){for(var n=t[0],r=t[1],o=t[2],i=t[3],u=t[4],a=t[5],s=0,c=e.length;s<c;s+=3){var B=e[s];if(n<=B&&B<=i){var A=e[s+1];if(r<=A&&A<=u){var f=e[s+2];if(o<=f&&f<=a)return!0}}}return!1},t.intersectAABB3Triangles3=function(t,e,n){return!1},t.intersectAABB3s=function(t,e){return 2},t.intersectFrustum3AABB3=function(t,e){var n=1,r=o,u=i;r[0]=e[0],r[1]=e[1],r[2]=e[2],u[0]=e[3],u[1]=e[4],u[2]=e[5];for(var a=[r,u],s=0;s<6;++s){var c=t.planes[s];if(c.normal[0]*a[c.testVertex[0]][0]+c.normal[1]*a[c.testVertex[1]][1]+c.normal[2]*a[c.testVertex[2]][2]+c.offset<0)return 3;c.normal[0]*a[1-c.testVertex[0]][0]+c.normal[1]*a[1-c.testVertex[1]][1]+c.normal[2]*a[1-c.testVertex[2]][2]+c.offset<0&&(n=2)}return n},t.intersectFrustum3Lines3=function(t,e,n){return!0},t.intersectFrustum3Point3=function(t,e){return!0},t.intersectFrustum3Positions3=function(t,e){return!0},t.intersectFrustum3Triangle3=function(t,e,n,r){return!0},t.intersectFrustum3Triangles3=function(t,e,n){return!0},t.points3ToAABB3=function(t,e){void 0===e&&(e=a());for(var r,o,i,u=n.MAX_DOUBLE,s=n.MAX_DOUBLE,c=n.MAX_DOUBLE,B=n.MIN_DOUBLE,A=n.MIN_DOUBLE,f=n.MIN_DOUBLE,l=0,m=t.length;l<m;l++)(r=t[l][0])<u&&(u=r),(o=t[l][1])<s&&(s=o),(i=t[l][2])<c&&(c=i),r>B&&(B=r),o>A&&(A=o),i>f&&(f=i);return e[0]=u,e[1]=s,e[2]=c,e[3]=B,e[4]=A,e[5]=f,e},t.positions3ToAABB3=v,t.setFrustum3=function(t,n,r){var o=e.mulMat4(n,t,u),i=o[0],a=o[1],s=o[2],c=o[3],B=o[4],A=o[5],f=o[6],l=o[7],m=o[8],h=o[9],v=o[10],p=o[11],O=o[12],M=o[13],x=o[14],D=o[15];return(r=r||new d).planes[0].set(c-i,l-B,p-m,D-O),r.planes[1].set(c+i,l+B,p+m,D+O),r.planes[2].set(c-a,l-A,p-h,D-M),r.planes[3].set(c+a,l+A,p+h,D+M),r.planes[4].set(c-s,l-f,p-v,D-x),r.planes[5].set(c+s,l+f,p+v,D+x),r},t.transformOBB3=function(t,e,n){var r;void 0===n&&(n=e);var o,i,u,a=e.length,s=t[0],c=t[1],B=t[2],A=t[3],f=t[4],l=t[5],m=t[6],h=t[7],v=t[8],p=t[9],d=t[10],O=t[11],M=t[12],x=t[13],D=t[14],E=t[15];for(r=0;r<a;r+=4)n[r+0]=s*(o=e[r+0])+f*(i=e[r+1])+v*(u=e[r+2])+M,n[r+1]=c*o+l*i+p*u+x,n[r+2]=B*o+m*i+d*u+D,n[r+3]=A*o+h*i+O*u+E;return n}});
//# sourceMappingURL=index.umd.js.map
