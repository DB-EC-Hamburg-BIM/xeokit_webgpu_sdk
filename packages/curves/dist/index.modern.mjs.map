{"version":3,"file":"index.modern.mjs","sources":["../src/index.ts"],"sourcesContent":["/**\n * [![npm version](https://badge.fury.io/js/%40xeokit%2Fmath.svg)](https://badge.fury.io/js/%40xeokit%2Fmath)\n * [![](https://data.jsdelivr.com/v1/package/npm/@xeokit/badge)](https://www.jsdelivr.com/package/npm/@xeokit/math)\n *\n * # xeokit Curves Math Library\n *\n * ---\n *\n * ### *Spline curve math functions*\n *\n * ---\n *\n * ## Installation\n *\n * ````bash\n * npm install @xeokit/curves\n * ````\n *\n * ````javascript\n * import * as curves from \"@xeokit/curves\";\n *\n * //..\n * ````\n *\n * @module @xeokit/curves\n */\n\n/**\n * Finds a tangent to a quadratic Bézier curve.\n *\n * @param t\n * @param p0\n * @param p1\n * @param p2\n */\nexport function tangentQuadraticBézier(t: number, p0: number, p1: number, p2: number): number {\n    return 2 * (1 - t) * (p1 - p0) + 2 * t * (p2 - p1);\n}\n\n/**\n * Finds a tangent to a quadratic Bézier curve.\n *\n * @param t\n * @param p0\n * @param p1\n * @param p2\n */\nexport function tangentQuadraticBézier3(t: number, p0: number, p1: number, p2: number, p3: number): number {\n    return -3 * p0 * (1 - t) * (1 - t) +\n        3 * p1 * (1 - t) * (1 - t) - 6 * t * p1 * (1 - t) +\n        6 * t * p2 * (1 - t) - 3 * t * t * p2 +\n        3 * t * t * p3;\n}\n\n/**\n * Finds a tangent to a spline.\n * @param t\n */\nexport function tangentSpline(t: number) {\n    const h00 = 6 * t * t - 6 * t;\n    const h10 = 3 * t * t - 4 * t + 1;\n    const h01 = -6 * t * t + 6 * t;\n    const h11 = 3 * t * t - 2 * t;\n    return h00 + h10 + h01 + h11;\n}\n\n/**\n * Catmull-Rom interpolation on a curve.\n * @param p0\n * @param p1\n * @param p2\n * @param p3\n * @param t\n */\nexport function catmullRomInterpolate(p0: number, p1: number, p2: number, p3: number, t: number): number {\n    const v0 = (p2 - p0) * 0.5;\n    const v1 = (p3 - p1) * 0.5;\n    const t2 = t * t;\n    const t3 = t * t2;\n    return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n}\n\n// Bézier Curve formulii from http://en.wikipedia.org/wiki/B%C3%A9zier_curve\n\n// Quad Bézier Functions\n\n/**\n * Quad Bézier curve function b2p0\n *\n * @param t\n * @param p\n */\nexport function b2p0(t: number, p: number): number {\n    const k = 1 - t;\n    return k * k * p;\n\n}\n\n/**\n * Quad Bézier curve function b2p1\n * @param t\n * @param p\n */\nexport function b2p1(t: number, p: number): number {\n    return 2 * (1 - t) * t * p;\n}\n\n/**\n * Quad Bézier curve function b2p2\n * @param t\n * @param p\n */\nexport function b2p2(t: number, p: number): number {\n    return t * t * p;\n}\n\n/**\n * Quad Bézier curve function b2\n * @param t\n * @param p0\n * @param p1\n * @param p2\n */\nexport function b2(this: any, t: number, p0: number, p1: number, p2: number): number {\n    return this.b2p0(t, p0) + this.b2p1(t, p1) + this.b2p2(t, p2);\n}\n\n// Cubic Bézier Functions\n\n/**\n * Cubic Bézier curve function b3p0\n * @param t\n * @param p\n */\nexport function b3p0(t: number, p: number): number {\n    const k = 1 - t;\n    return k * k * k * p;\n}\n\n/**\n * Cubic Bézier curve function b3p1\n * @param t\n * @param p\n */\nexport function b3p1(t: number, p: number): number {\n    const k = 1 - t;\n    return 3 * k * k * t * p;\n}\n\n/**\n * Cubic Bézier curve function b3p2\n * @param t\n * @param p\n */\nexport function b3p2(t: number, p: number): number {\n    const k = 1 - t;\n    return 3 * k * t * t * p;\n}\n\n/**\n * Cubic Bézier curve function b3p3\n * @param t\n * @param p\n */\nexport function b3p3(t: number, p: number) {\n    return t * t * t * p;\n}\n\n/**\n * Cubic Bézier curve function b3\n * @param t\n * @param p0\n * @param p1\n * @param p2\n * @param p3\n */\nexport function b3(this: any, t: number, p0: number, p1: number, p2: number, p3: number) {\n    return this.b3p0(t, p0) + this.b3p1(t, p1) + this.b3p2(t, p2) + this.b3p3(t, p3);\n}\n"],"names":["tangentQuadraticBézier","t","p0","p1","p2","tangentQuadraticBézier3","p3","tangentSpline","catmullRomInterpolate","v0","v1","t2","b2p0","p","k","b2p1","b2p2","b2","this","b3p0","b3p1","b3p2","b3p3","b3"],"mappings":"AAmCgB,SAAAA,EAAuBC,EAAWC,EAAYC,EAAYC,GACtE,OAAO,GAAK,EAAIH,IAAME,EAAKD,GAAM,EAAID,GAAKG,EAAKD,EACnD,CAUgB,SAAAE,EAAwBJ,EAAWC,EAAYC,EAAYC,EAAYE,GACnF,OAAQ,EAAIJ,GAAM,EAAID,IAAM,EAAIA,GAC5B,EAAIE,GAAM,EAAIF,IAAM,EAAIA,GAAK,EAAIA,EAAIE,GAAM,EAAIF,GAC/C,EAAIA,EAAIG,GAAM,EAAIH,GAAK,EAAIA,EAAIA,EAAIG,EACnC,EAAIH,EAAIA,EAAIK,CACpB,CAMM,SAAUC,EAAcN,GAK1B,OAJY,EAAIA,EAAIA,EAAI,EAAIA,GAChB,EAAIA,EAAIA,EAAI,EAAIA,EAAI,KACnB,EAAIA,EAAIA,EAAI,EAAIA,IACjB,EAAIA,EAAIA,EAAI,EAAIA,EAEhC,CAUM,SAAUO,EAAsBN,EAAYC,EAAYC,EAAYE,EAAYL,GAClF,MAAMQ,EAAiB,IAAXL,EAAKF,GACXQ,EAAiB,IAAXJ,EAAKH,GACXQ,EAAKV,EAAIA,EAEf,OAAQ,EAAIE,EAAK,EAAIC,EAAKK,EAAKC,IADpBT,EAAIU,KAC6B,EAAIR,EAAK,EAAIC,EAAK,EAAIK,EAAKC,GAAMC,EAAKF,EAAKR,EAAIE,CAC/F,UAYgBS,EAAKX,EAAWY,GAC5B,MAAMC,EAAI,EAAIb,EACd,OAAOa,EAAIA,EAAID,CAEnB,CAOgB,SAAAE,EAAKd,EAAWY,GAC5B,OAAQ,GAAI,EAAIZ,GAAKA,EAAIY,CAC7B,CAOgB,SAAAG,EAAKf,EAAWY,GAC5B,OAAOZ,EAAIA,EAAIY,CACnB,CASgB,SAAAI,EAAchB,EAAWC,EAAYC,EAAYC,GAC7D,OAAWc,KAACN,KAAKX,EAAGC,GAAMgB,KAAKH,KAAKd,EAAGE,GAAMe,KAAKF,KAAKf,EAAGG,EAC9D,CASgB,SAAAe,EAAKlB,EAAWY,GAC5B,MAAMC,EAAI,EAAIb,EACd,OAAOa,EAAIA,EAAIA,EAAID,CACvB,CAOgB,SAAAO,EAAKnB,EAAWY,GAC5B,MAAMC,EAAI,EAAIb,EACd,OAAQ,EAAGa,EAAIA,EAAIb,EAAIY,CAC3B,CAOgB,SAAAQ,EAAKpB,EAAWY,GAE5B,OAAO,GADG,EAAIZ,GACCA,EAAIA,EAAIY,CAC3B,CAOgB,SAAAS,EAAKrB,EAAWY,GAC5B,OAAOZ,EAAIA,EAAIA,EAAIY,CACvB,CAUM,SAAUU,EAActB,EAAWC,EAAYC,EAAYC,EAAYE,GACzE,OAAOY,KAAKC,KAAKlB,EAAGC,GAAMgB,KAAKE,KAAKnB,EAAGE,GAAMe,KAAKG,KAAKpB,EAAGG,GAAMc,KAAKI,KAAKrB,EAAGK,EACjF"}